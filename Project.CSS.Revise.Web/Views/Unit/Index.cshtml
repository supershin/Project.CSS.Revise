@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_LayoutSite.cshtml";
    var projectList = ViewBag.listProject as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
    var UnitstatuscsList = ViewBag.listUnitstatuscs as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
    var CSResponsList = ViewBag.listgCSRespons as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
}

<div class="container-fluid py-4">
    <div class="page-title mb-4">
        <div class="row align-items-center">
            <div class="col-6">
                <h5 class="mb-0 text-dark" style="font-size: 28px;">Unit List ✨</h5>
            </div>
            <div class="col-6">
                <ol class="breadcrumb justify-content-end mb-0">
                    <li class="breadcrumb-item">
                        <a href="index.html">
                            <svg class="stroke-icon" style="width:18px; height:18px;">
                                <use xlink:href="@Url.Content("~/assets/svg/icon-sprite.svg#stroke-home")"></use>
                            </svg>
                        </a>
                    </li>
                    <li class="breadcrumb-item">Unit</li>
                    <li class="breadcrumb-item active">Unit Search</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="card rounded-4 border-0 shadow-sm mb-4">
        <div class="card-body p-3">
            <div class="row g-3 align-items-center">
                <div class="col-md-9 position-relative">
                    <i class="fa fa-search position-absolute text-muted" style="left: 25px; top: 50%; transform: translateY(-50%); z-index: 5;"></i>
                    <input type="text" class="form-control rounded-pill ps-5 py-2 border-0 shadow-none bg-light"
                           id="txtSearch"
                           placeholder="Search Unit Code, Address, or Customer...">
                </div>
                <div class="col-md-3">
                    <button class="btn btn-primary w-100 rounded-pill py-2 btn-hover-zoom"
                            data-bs-toggle="modal" data-bs-target="#conditionModal">
                        <i class="fa fa-filter me-2"></i> Condition
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="emptyState" class="card rounded-4 border-0 shadow-sm text-center py-5">
        <div class="card-body py-5">
            <div class="mb-3">
                <i class="fa-solid fa-magnifying-glass fa-3x text-light opacity-50"></i>
            </div>
            <h4 class="text-dark">Ready to explore?</h4>
            <p class="text-muted mx-auto" style="max-width: 300px;">Set your filters and click Display to see the latest unit updates.</p>
        </div>
    </div>

    <div id="resultSection" class="card rounded-4 border-0 shadow-sm d-none">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-bordered table-hover align-middle mb-0" style="min-width: 5000px;">
                    <thead class="bg-light text-nowrap">
                        <tr>
                            <th class="ps-4 sticky-col">Unit Code</th>
                            <th>Addr No.</th>
                            <th>Build</th>
                            <th>Floor</th>
                            <th>Unit Type</th>
                            <th>Area</th>
                            <th>Unit Status</th>
                            <th>Selling Price</th>
                            <th>Free All</th>
                            <th>Transfer Net Price</th>
                            <th>Contract No.</th>
                            <th>Verify Code</th>
                            <th>Customer ID</th>
                            <th>Customer Name</th>
                            <th>Financial Draft</th>
                            <th>Pre-approve (FIN)</th>
                            <th>Bank Status (FIN)</th>
                            <th>Bank Name (FIN)</th>
                            <th>Book Date</th>
                            <th>Contract Date</th>
                            <th>Appoint Last Date</th>
                            <th>Inspect Count</th>
                            <th>Inspect Last Date</th>
                            <th>Defect Count</th>
                            <th>Defect Status</th>
                            <th>QC5 Finish Date</th>
                            <th>QC6</th>
                            <th>QC6 Date</th>
                            <th>Unit Status(CS)</th>
                            <th>Unit Status(Sale)</th>
                            <th>Expect Transfer(CS)</th>
                            <th>Transfer Due(CS)</th>
                            <th>Expect Transfer By(CS)</th>
                            <th>Transfer Date</th>
                            <th>Receive Date</th>
                            <th>Receive Document</th>
                            <th>CS Response</th>
                            <th>Last Expect Date</th>
                            <th>Last Fast Track</th>
                            <th>Redemption</th>
                            <th>Bank Selected CS</th>
                           
                        </tr>
                    </thead>
                    <tbody id="tblBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="conditionModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content border-0 shadow-lg" style="border-radius: 20px;">

            <div class="modal-header">
                <h4 class="modal-title" id="conditionModalLabel">
                    Search Condition
                </h4>
                <button type="button" class="btn-close shadow-none" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body p-4">
                <div class="row mb-4">
                    <div class="col-12 mb-3">
                        <span class="badge bg-primary-subtle text-primary px-3 py-2 rounded-pill">
                            <i class="fa-regular fa-file-lines me-2"></i>ข้อมูลยูนิต
                        </span>
                    </div>
                    <div class="col-md-6 mb-3">
                        <!-- Example dropwon single select  -->
                        <label for="ddl_Project" class="form-label fw-bold">Project</label>
                        <select id="ddl_Project" class="form-control">
                            @foreach (var p in projectList)
                            {
                                <option value="@p.ValueString">@p.Text</option>
                            }
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Unit Code</label>
                        <input type="text" class="form-control rounded-3 shadow-none" placeholder="Enter unit code">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Addr No.</label>
                        <input type="text" class="form-control rounded-3 shadow-none" placeholder="Enter cuustomer number">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Transfer Type</label>
                        <input class="form-control rounded-3 shadow-none" list="defectOptions" placeholder="Select...">
                        <datalist id="defectOptions">
                            <option value="เงินสด"></option>
                            <option value="สินเชื่อ"></option>
                            
                        </datalist>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Customer</label>
                        <input type="text" class="form-control rounded-3 shadow-none" placeholder="Enter cuustomer name">
                    </div>
                </div>

                <div class="row">
                    <div class="col-12 mb-3">
                        <span class="badge bg-purple-subtle text-purple px-3 py-2 rounded-pill" style="background-color: #f3e8ff; color: #7e22ce;">
                            <i class="fa-solid fa-circle-check me-2"></i>ข้อมูลธนาคาร
                        </span>
                    </div>             
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Bank Status</label>
                        <select class="form-select multi-select" multiple="multiple">
                            <option value="Wait Bank">Wait Bank</option>
                            <option value="In Process">In Process</option>
                            <option value="Pre-Approve">Pre-Approve</option>
                            <option value="Approve">Approve</option>
                            <option value="Reject">Reject</option>
                            <option value="Cancel">Cancel</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Bank</label>
                        <div class="d-flex align-items-center gap-2">
                
                            <select id="bankSelect" class="form-select rounded-3 shadow-none" required>
                                <option value="" disabled selected hidden>All</option>

                                <option value="BBL" data-logo="path/to/bbl-logo.png">BBL</option>
                                <option value="KBank" data-logo="path/to/kbank-logo.png">KBank</option>
                                <option value="KTB" data-logo="path/to/ktb-logo.png">KTB</option>
                                <option value="TTB" data-logo="path/to/ttb-logo.png">TTB</option>
                                <option value="SCB" data-logo="path/to/scb-logo.png">SCB</option>
                            </select>
                        </div>

                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Bank Select CS</label>
                        <div class="d-flex align-items-center gap-2">

                            <select id="bankSelect" class="form-select rounded-3 shadow-none" required>
                                <option value="" disabled selected hidden>All</option>

                                <option value="BBL" data-logo="path/to/bbl-logo.png">BBL</option>
                                <option value="KBank" data-logo="path/to/kbank-logo.png">KBank</option>
                                <option value="KTB" data-logo="path/to/ktb-logo.png">KTB</option>
                                <option value="TTB" data-logo="path/to/ttb-logo.png">TTB</option>
                                <option value="SCB" data-logo="path/to/scb-logo.png">SCB</option>
                            </select>
                        </div>

                    </div>

                </div>
                <div class="row mb-4 p-3 bg-light rounded-4 border">
                    <div class="col-12 mb-3">
                        <span class="badge bg-warning-subtle text-warning-emphasis px-3 py-2 rounded-pill">
                            <i class="fa-regular fa-calendar me-2"></i>ข้อมูลวันที่
                        </span>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold text-secondary">QC6 Date</label>
                        <div class="input-group">
                            <select id="bankSelect" class="form-select border-end-0 shadow-none" style="max-width: 100px;" required>
                                <option value="" disabled selected hidden>All</option>
                                <option value="Y">Yes</option>
                                <option value="N">No</option>
                            </select>
                            <input type="date" class="form-control shadow-none">
                            <span class="input-group-text bg-white text-muted">~</span>
                            <input type="date" class="form-control shadow-none">
                        </div>
                    </div>
                    <!-- Example date range input -->
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold text-secondary">Expect Transfer</label>
                        <div class="input-group">
                            <input type="text"
                                   id="txt_DateStart"
                                   class="form-control"
                                   placeholder="dd/mm/yyyy">

                            <span class="input-group-text" style="height:38px; display:flex; align-items:center;">-</span>

                            <input type="text"
                                   id="txt_DateEnd"
                                   class="form-control"
                                   placeholder="dd/mm/yyyy">
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold text-secondary">Receive Roome</label>
                        <div class="input-group">
                            <select id="bankSelect" class="form-select border-end-0 shadow-none" style="max-width: 100px;" required>
                                <option value="" disabled selected hidden>All</option>
                                <option value="Y">Yes</option>
                                <option value="N">No</option>
                            </select>
                            <input type="date" class="form-control shadow-none">
                            <span class="input-group-text bg-white text-muted">~</span>
                            <input type="date" class="form-control shadow-none">
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold text-secondary">Transfer Due</label>
                        <div class="input-group">
                            <span class="input-group-text bg-white"><i class="fa-solid fa-building-columns text-muted"></i></span>
                            <input type="date" class="form-control shadow-none">
                            <span class="input-group-text bg-white text-muted">~</span>
                            <input type="date" class="form-control shadow-none">
                        </div>
                    </div>
                </div>

                
                
                <div class="row">
                    <div class="col-12 mb-3">
                        <span class="badge px-3 py-2 rounded-pill" style="background-color: #f3e8ff; color: #7e22ce;">
                            <i class="fa-solid fa-circle-check me-2"></i>สถานะ
                        </span>
                    </div>
                    <div class="col-md-12 mb-3">
                        <!-- Example dropwon multi select  -->
                        <label for="ddl_CSReponse" class="form-label fw-bold">CS Reponse</label>
                        <select id="ddl_CSReponse" class="form-control" multiple>
                            @foreach (var c in CSResponsList)
                            {
                                <option value="@c.ValueString">@c.Text</option>
                            }
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Deviate Status</label>
                        <select class="form-select multi-select" multiple="multiple">
                            <option value="ไม่ระบุ">ไม่ระบุ</option>
                            <option value="Regist">Regist</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Done">Done</option>
                            <option value="Continue">Continue</option>
                            <option value="Lose">Lose</option>
                            <option value=" คาดหวังโอน (deviate)"> คาดหวังโอน (deviate)</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold"> Deviate</label>
                        <select class="form-select multi-select" multiple="multiple">
                            <option value="แนวโน้มไม่โอน/CS">แนวโน้มไม่โอน/CS</option>
                            <option value="แนวโน้มไม่โอน/Sale">แนวโน้มไม่โอน/Sale</option>
                            <option value="โอนลอย">โอนลอย</option>
                            <option value="แคมเปญ ชีวิตดี๊ดี">แคมเปญ ชีวิตดี๊ดี</option>
                            <option value="รอยกเลิก CS">รอยกเลิก CS</option>
                            <option value="ห้องว่าง VIP">ห้องว่าง VIP</option>
                            <option value="ห้องว่าง">ห้องว่าง</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold"> Remark Status</label>
                        <select class="form-select multi-select" multiple="multiple">
                            <option value="เงินสด">เงินสด</option>
                            <option value="เงินสด/รอห้อง">เงินสด/รอห้อง</option>
                            <option value="เปลี่ยนผู้กู้ร่วม">เปลี่ยนผู้กู้ร่วมย</option>
                            <option value="แก้เคส">แก้เคส</option>
                            <option value="โอนลอย">โอนลอย</option>
                            <option value="ไม่ให้ความร่วมมือ">ไม่ให้ความร่วมมือ</option>
                            <option value="ไม่ติดเรื่องห้อง">ไม่ติดเรื่องห้อง</option>
                            <option value="กู้ได้ไม่เต็ม/ไม่มีส่วนต่าง">กู้ได้ไม่เต็ม/ไม่มีส่วนต่าง</option>
                            <option value="กู้ไม่ผ่าน">กู้ไม่ผ่าน</option>
                            <option value="กู้ไม่ผ่าน/Refund">กู้ไม่ผ่าน/Refund</option>
                            <option value="ขอเพิ่มผู้กู้ร่วม">ขอเพิ่มผู้กู้ร่วม</option>
                            <option value="ขาดเอกสาร">ขาดเอกสาร</option>
                            <option value="ขาดส่วนต่าง">ขาดส่วนต่าง</option>
                            <option value="ขายดาวน์">ขายดาวน์</option>
                            <option value=" ธุรกิจไม่เข้าเกณฑ์"> ธุรกิจไม่เข้าเกณฑ์</option>
                            <option value="มีประวัติบูโร">มีประวัติบูโร</option>
                            <option value="มีภาระหนี้สูง">มีภาระหนี้สูง</option>
                            <option value="ยื่นเอง">ยื่นเอง</option>
                            <option value="ยื่นสวัสดิการ">ยื่นสวัสดิการง</option>
                            <option value="ยื่นสหกรณ์">ยื่นสหกรณ์</option>
                            <option value="รอเข้าตรวจ">รอเข้าตรวจ</option>
                            <option value="รอผล/รอห้อง">รอผล/รอห้อง</option>
                            <option value="รอผล/รอห้อง">รอผล/รอห้อง</option>
                            <option value="รอผลสหกรณ์">รอผลสหกรณ์</option>
                            <option value="รอผ่านโปร">รอผ่านโปร</option>
                            <option value="รอยื่น">รอยื่น</option>
                            <option value="รอยื่น/รอห้อง">รอยื่น/รอห้องง</option>
                            <option value="รอห้อง">รอห้อง</option>
                            <option value="รับมอบ">รับมอบ</option>
                            <option value="รับมอบห้อง">รับมอบห้อง</option>
                            <option value="รายได้ไม่พอ ไม่มีผู้กู้ร่วม">รายได้ไม่พอ ไม่มีผู้กู้ร่วม</option>
                            <option value="ห้องว่างง">ห้องว่าง</option>
                            <option value="อนุมัติเบื้องต้น">อนุมัติเบื้องต้น</option>
                            <option value="อนุมัติแล้ว">อนุมัติแล้ว </option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Unit Status Sale</label>
                        <select class="form-select multi-select" multiple="multiple">
                            <option value="อยู่ระหว่างติดตาม">อยู่ระหว่างติดตาม</option>
                            <option value="แนวโน้มไม่โอน/Sale">แนวโน้มไม่โอน/Sale</option>
                            <option value="กลับมารับห้อง">กลับมารับห้อง</option>
                            <option value="ยืนยันไม่รับห้อง">ยืนยันไม่รับห้อง</option>
                            <option value="Deviate">Deviate</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Unit Status CS</label>
                        <select class="form-select multi-select" multiple="multiple">
                            <option value="โอนแล้ว">โอนแล้ว</option>
                            <option value="นัดโอนแล้ว">นัดโอนแล้ว</option>
                            <option value="ยังไม่โอน">ยังไม่โอน</option>
                            <option value="จอง">จอง</option>
                        </select>
                    </div>

           
                
            </div>

                <div class="spacer" style="height: 70px;"></div>
            </div>

            <div class="modal-footer border-0 p-6 pt-0">
                <button type="button" class="btn btn-light rounded-pill px-4 text-muted fw-bold" data-bs-dismiss="modal">Cancel</button>

                <button type="button" id="btnDisplayResults" class="btn rounded-pill px-5 text-white btn-hover-zoom"
                        style="background-color: var(--theme-deafult) !important; border-color: var(--theme-deafult) !important;">
                    Display Results
                </button>
            </div>

        </div>
    </div>
</div>

@section Scripts {
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="~/js/Pages/Unit/Loading_DDL.js?ver=@DateTime.Now.Ticks.ToString()"></script>
    <script src="~/js/Pages/Unit/UnitSearch.js?ver=@DateTime.Now.Ticks.ToString()"></script>
    <link rel="stylesheet" type="text/css" href="~/css/unitsearch.css?ver=@DateTime.Now.Ticks.ToString()">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
}