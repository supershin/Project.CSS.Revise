@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_LayoutSite.cshtml";
    var buList = ViewBag.listBu as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
    var ExpecttransferList = ViewBag.listExpecttransfer as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
    var UnitstatuscsList = ViewBag.listUnitstatuscs as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
    var CSResponsList = ViewBag.listgCSRespons as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
    var CareerList = ViewBag.listCareer as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
    var ReasonList = ViewBag.listReason as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
    var BankList = ViewBag.listBank as IEnumerable<dynamic> ?? Enumerable.Empty<dynamic>();
}

<div class="container-fluid">
    <div class="page-title">
        <div class="row">
            <div class="col-6">
                <h4>Queue Bank</h4>
            </div>
            <div class="col-6">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="index.html">
                            <svg class="stroke-icon">
                                <use xlink:href="@Url.Content("~/assets/svg/icon-sprite.svg#stroke-home")"></use>
                            </svg>
                        </a>
                    </li>
                    <li class="breadcrumb-item">Queue</li>
                    <li class="breadcrumb-item active">Queue Bank</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <!-- Filters card -->
    <div class="card filter-card">
        <div class="card-header d-flex align-items-center justify-content-between">
            <h5 class="mb-0">Filters</h5>
            <button class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-1"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#fltCollapse"
                    aria-expanded="true"
                    aria-controls="fltCollapse">
                <i class="fa fa-chevron-up"></i>
            </button>
        </div>
        <div id="fltCollapse" class="collapse show">
            <div class="card-body">
                <div class="row g-3 filter-grid">
                    <div class="col-12 col-md-4">
                        <label for="ddl_BUG" class="form-label fw-bold">BUG</label>
                        <select id="ddl_BUG" class="form-control multi-select" multiple>
                            @foreach (var bu in buList)
                            {
                                var val = (bu.ID ?? bu.ValueInt ?? bu.Value ?? "").ToString();
                                var text = (bu.Name ?? bu.Text ?? "").ToString();
                                <option value="@val">@text</option>
                            }
                        </select>
                    </div>
                    <div class="col-12 col-md-4">
                        <label for="ddl_Project" class="form-label fw-bold">Project</label>
                        <select id="ddl_Project" class="form-control">

                        </select>
                    </div>
                    <div class="col-12 col-md-4">
                        <label for="ddl_UnitCode" class="form-label fw-bold">Unit Code</label>
                        <select id="ddl_UnitCode" class="form-control multi-select" multiple>

                        </select>
                    </div>
                    <div class="col-12 col-md-4">
                        <label for="ddl_CSResponsible" class="form-label fw-bold">CS Response</label>
                        <select id="ddl_CSResponsible" class="form-control multi-select" multiple>
                            @foreach (var cs in CSResponsList)
                            {
                                var val = (cs.ValueInt ?? "").ToString();
                                var text = (cs.Text ?? "").ToString();
                                <option value="@val">@text</option>
                            }
                        </select>
                    </div>
                    <div class="col-12 col-md-4">
                        <label for="ddl_UnitStatusCS" class="form-label fw-bold">Unit Status</label>
                        <select id="ddl_UnitStatusCS" class="form-control" multiple>
                            @foreach (var et in UnitstatuscsList)
                            {
                                var val = (et.ValueInt ?? "").ToString();
                                var text = (et.Text ?? "").ToString();
                                <option value="@val">@text</option>
                            }
                        </select>
                    </div>
                    <div class="col-12 col-md-4">
                        <label for="ddl_ExpectTransferBy" class="form-label fw-bold">Expect Transfer By</label>
                        <select id="ddl_ExpectTransferBy" class="form-control multi-select" multiple>
                            @foreach (var et in ExpecttransferList)
                            {
                                var val = (et.ValueInt ?? "").ToString();
                                var text = (et.Text ?? "").ToString();
                                <option value="@val">@text</option>
                            }
                        </select>
                    </div>
                    <div class="col-12 col-md-4" id="filter-register-date">
                        <label for="txt_RegisterDate" class="form-label fw-bold">Register Date</label>
                        <div class="input-group">
                            <input type="date" id="txt_RegisterDateStart" class="form-control" value="@DateTime.Now.ToString("yyyy-MM-dd")">
                            -
                            <input type="date" id="txt_RegisterDateEnd" class="form-control" placeholder="End date">
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-footer d-flex justify-content-end align-items-center gap-2 flex-nowrap footer-actions p-2">
                <button id="btnFilterCancel" type="button" class="btn btn-outline-secondary btn-sm" onclick="ClearFilter()">
                    <i class="fa fa-undo me-1"></i> Cancel
                </button>
                <button id="btnSearch" class="btn btn-primary btn-sm" type="button">
                    <i class="fa fa-search me-1"></i> Search
                </button>

            </div>
        </div>
    </div>

    <!-- Project Table card -->
    <div class="card filter-card">
        <div class="card-header d-flex align-items-center justify-content-between">
            <h5 class="mb-0">Project Table</h5>
            <button class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-1"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#fltCollapseTable"
                    aria-expanded="true"
                    aria-controls="fltCollapseTable">
                <i class="fa fa-chevron-up"></i>
            </button>
        </div>
        <div id="fltCollapseTable" class="collapse show">
            <div class="card-body">
                <div class="project-table-card">
                    <div class="card-header d-flex align-items-center justify-content-between">
                        <h5 class="mb-0">เคฟ ทาวน์ ไอส์แลนด์</h5>
                        <button class="btn btn-success btn-sm" onclick="openCreateRegister()">
                            <i class="fa fa-plus me-1"></i> Register
                        </button>
                    </div>

                    <div class="card-body p-3">
                        <table id="QueueBankRegisterTable" class="table table-hover table-nowrap queue-table mb-0">
                            <thead>
                                <tr>
                                    <th style="width:64px;">No.</th>
                                    <th style="width:140px;">Unit Code</th>
                                    <th class="customer-col" style="min-width:320px;">Customer Name</th>
                                    <th style="width:140px;">Appointment</th>
                                    <th style="width:160px;">Status</th>
                                    <th style="width:120px;">Time</th>
                                    <th style="width:120px;">Counter</th>
                                    <th style="width:170px;">Unit Status</th>
                                    <th class="cs-col" style="min-width:220px;">CS Response</th>
                                    <th style="width:90px;"></th>
                                </tr>
                            </thead>
                            <tbody id="QueueBankRegisterTableBody">
                            </tbody>
                        </table>
                    </div>

               


                </div>
            </div>
        </div>
    </div>

    <!-- Summary Register card -->
    <div class="card filter-card">
        <div class="card-header d-flex align-items-center justify-content-between">
            <h5 class="mb-0">Summary Register</h5>
            <button class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-1"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#fltCollapseSummaryRegister"
                    aria-expanded="true"
                    aria-controls="fltCollapseSummaryRegister">
                <i class="fa fa-chevron-up"></i>
            </button>
        </div>
        <div id="fltCollapseSummaryRegister" class="collapse show">
            <div class="card-body">
                <div class="summary-register">

                    <!-- 🔹 หัวข้อ + ปุ่มสลับ view -->
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h5 class="mb-0">
                            Summary Register Data
                            <span id="sum-register-date" class="text-muted ms-2"></span>
                        </h5>

                        <!-- 🔹 ปุ่มเปลี่ยน view (icon) -->
                        <button id="btnSummaryRegisterToggle"
                                type="button"
                                class="btn btn-sm btn-outline-secondary"
                                title="Change view"
                                aria-label="Change view">
                            <i class="fa fa-table" aria-hidden="true"></i>
                            <span class="visually-hidden">Change view</span>
                        </button>
                    </div>

                    <!-- 🔹 VIEW แบบกล่อง (เดิม) -->
                    <div id="summary-register-box-view">
                        <!-- Top Row -->
                        <div class="summary-row">
                            <div class="summary-box bg-green">
                                <h6>Register</h6>
                                <div class="summary-values">
                                    <div><strong id="sum-register-unit">0</strong><br>Unit</div>
                                    <div><strong id="sum-register-value">0.00 M</strong><br>Value</div>
                                </div>
                                <div class="summary-footer" id="sum-register-percent">0%</div>
                            </div>

                            <div class="summary-box bg-blue">
                                <h6>Queue</h6>
                                <div class="summary-values">
                                    <div><strong id="sum-queue-unit">0</strong><br>Unit</div>
                                    <div><strong id="sum-queue-value">0.00 M</strong><br>Value</div>
                                </div>
                                <div class="summary-footer" id="sum-queue-percent">0%</div>
                            </div>

                            <div class="summary-box bg-orange">
                                <h6>In Process</h6>
                                <div class="summary-values">
                                    <div><strong id="sum-inprocess-unit">0</strong><br>Unit</div>
                                    <div><strong id="sum-inprocess-value">0.00 M</strong><br>Value</div>
                                </div>
                                <div class="summary-footer" id="sum-inprocess-percent">0%</div>
                            </div>

                            <div class="summary-box bg-green-light">
                                <h6>Done</h6>
                                <div class="summary-values">
                                    <div><strong id="sum-done-unit">0</strong><br>Unit</div>
                                    <div><strong id="sum-done-value">0.00 M</strong><br>Value</div>
                                </div>
                                <div class="summary-footer" id="sum-done-percent">0%</div>
                            </div>
                        </div>

                        <!-- Second Row -->
                        <div class="summary-row mt-3">
                            <!-- ยื่น -->
                            <div class="summary-box bg-green-light">
                                <h6>ยื่น</h6>
                                <div class="summary-values">
                                    <div><strong id="sum-loan-yes-unit">0</strong><br>Unit</div>
                                    <div><strong id="sum-loan-yes-value">0.00 M</strong><br>Value</div>
                                </div>
                                <div class="summary-footer" id="sum-loan-yes-percent">0%</div>
                            </div>

                            <!-- ไม่ยื่น -->
                            <div class="summary-box bg-pink-soft">
                                <h6>ไม่ยื่น</h6>
                                <div class="summary-values">
                                    <div><strong id="sum-loan-no-unit">0</strong><br>Unit</div>
                                    <div><strong id="sum-loan-no-value">0.00 M</strong><br>Value</div>
                                </div>
                                <div class="summary-footer" id="sum-loan-no-percent">0%</div>
                            </div>

                            <!-- อาชีพอิสระ -->
                            <div class="summary-box bg-pink">
                                <h6>อาชีพอิสระ</h6>
                                <div class="summary-values">
                                    <div><strong id="sum-career-freelance-unit">0</strong><br>Unit</div>
                                    <div><strong id="sum-career-freelance-value">0.00 M</strong><br>Value</div>
                                </div>
                                <div class="summary-footer" id="sum-career-freelance-percent">0%</div>
                            </div>

                            <!-- รายได้ประจำ -->
                            <div class="summary-box bg-pink">
                                <h6>รายได้ประจำ</h6>
                                <div class="summary-values">
                                    <div><strong id="sum-career-salary-unit">0</strong><br>Unit</div>
                                    <div><strong id="sum-career-salary-value">0.00 M</strong><br>Value</div>
                                </div>
                                <div class="summary-footer" id="sum-career-salary-percent">0%</div>
                            </div>

                            <!-- เจ้าของกิจการ -->
                            <div class="summary-box bg-pink">
                                <h6>เจ้าของกิจการ</h6>
                                <div class="summary-values">
                                    <div><strong id="sum-career-owner-unit">0</strong><br>Unit</div>
                                    <div><strong id="sum-career-owner-value">0.00 M</strong><br>Value</div>
                                </div>
                                <div class="summary-footer" id="sum-career-owner-percent">0%</div>
                            </div>
                        </div>
                    </div>

                    <!-- 🔹 VIEW แบบ TABLE (ซ่อนตอนเริ่ม) -->
                    <div id="summary-register-table-view" class="d-none">

                        <!-- Group 1: Register / Queue / In Process / Done -->
                        <div class="mb-3">
                            <h6 class="fw-bold mb-2">Group 1: Register Status</h6>
                            <div class="table-responsive">
                                <table class="table table-sm table-bordered mb-0">
                                    <thead>
                                        <tr>
                                            <th style="width: 160px;">Status</th>
                                            <th style="width: 100px;">Unit</th>
                                            <th style="width: 140px;">Value (M)</th>
                                            <th style="width: 80px;">%</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Register</td>
                                            <td id="tbl-register-unit">0</td>
                                            <td id="tbl-register-value">0.00 M</td>
                                            <td id="tbl-register-percent">0%</td>
                                        </tr>
                                        <tr>
                                            <td>Queue</td>
                                            <td id="tbl-queue-unit">0</td>
                                            <td id="tbl-queue-value">0.00 M</td>
                                            <td id="tbl-queue-percent">0%</td>
                                        </tr>
                                        <tr>
                                            <td>In Process</td>
                                            <td id="tbl-inprocess-unit">0</td>
                                            <td id="tbl-inprocess-value">0.00 M</td>
                                            <td id="tbl-inprocess-percent">0%</td>
                                        </tr>
                                        <tr>
                                            <td>Done</td>
                                            <td id="tbl-done-unit">0</td>
                                            <td id="tbl-done-value">0.00 M</td>
                                            <td id="tbl-done-percent">0%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Group 2: ยื่น / ไม่ยื่น -->
                        <div class="mb-3">
                            <h6 class="fw-bold mb-2">Group 2: สถานะยื่นกู้</h6>
                            <div class="table-responsive">
                                <table class="table table-sm table-bordered mb-0">
                                    <thead>
                                        <tr>
                                            <th style="width: 160px;">ประเภท</th>
                                            <th style="width: 100px;">Unit</th>
                                            <th style="width: 140px;">Value (M)</th>
                                            <th style="width: 80px;">%</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>ยื่น</td>
                                            <td id="tbl-loan-yes-unit">0</td>
                                            <td id="tbl-loan-yes-value">0.00 M</td>
                                            <td id="tbl-loan-yes-percent">0%</td>
                                        </tr>
                                        <tr>
                                            <td>ไม่ยื่น</td>
                                            <td id="tbl-loan-no-unit">0</td>
                                            <td id="tbl-loan-no-value">0.00 M</td>
                                            <td id="tbl-loan-no-percent">0%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Group 3: อาชีพ -->
                        <div>
                            <h6 class="fw-bold mb-2">Group 3: ประเภทอาชีพ</h6>
                            <div class="table-responsive">
                                <table class="table table-sm table-bordered mb-0">
                                    <thead>
                                        <tr>
                                            <th style="width: 160px;">อาชีพ</th>
                                            <th style="width: 100px;">Unit</th>
                                            <th style="width: 140px;">Value (M)</th>
                                            <th style="width: 80px;">%</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>อาชีพอิสระ</td>
                                            <td id="tbl-career-freelance-unit">0</td>
                                            <td id="tbl-career-freelance-value">0.00 M</td>
                                            <td id="tbl-career-freelance-percent">0%</td>
                                        </tr>
                                        <tr>
                                            <td>รายได้ประจำ</td>
                                            <td id="tbl-career-salary-unit">0</td>
                                            <td id="tbl-career-salary-value">0.00 M</td>
                                            <td id="tbl-career-salary-percent">0%</td>
                                        </tr>
                                        <tr>
                                            <td>เจ้าของกิจการ</td>
                                            <td id="tbl-career-owner-unit">0</td>
                                            <td id="tbl-career-owner-value">0.00 M</td>
                                            <td id="tbl-career-owner-percent">0%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </div> <!-- /table view -->

                </div>
            </div>
        </div>
    </div>


    <!--  Summary Bank card -->
    <div class="card filter-card">
        <div class="card-header d-flex align-items-center justify-content-between">
            <h5 class="mb-0">Summary Bank</h5>
            <button class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-1"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#fltCollapseSummaryBank"
                    aria-expanded="true"
                    aria-controls="fltCollapseSummaryBank">
                <i class="fa fa-chevron-up"></i>
            </button>
        </div>
        <div id="fltCollapseSummaryBank" class="collapse show">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered align-middle summary-bank-table">
                        <thead>
                            <tr>
                                <th style="width: 340px;">ธนาคาร</th>
                                <th style="width: 160px;">อัตราดอกเบี้ยเฉลี่ย 3 ปี</th>
                                <th style="width: 120px;">จำนวน</th>
                                <th style="width: 160px;">มูลค่า</th>
                                <th style="width: 100px;">%</th>
                            </tr>
                        </thead>
                        <tbody id="summary-bank-body">
                            <tr>
                                <td colspan="5" class="text-center text-muted">
                                    Loading...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

</div>

<div class="container-fluid mb-3">
    <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">

        <!-- Left: Back Button -->
        <button id="btnBack" class="btn d-flex align-items-center gap-1">
            <i class="fa fa-arrow-left"></i> Back
        </button>

        <!-- Right: Action Buttons -->
        <div class="d-flex align-items-center gap-2 flex-wrap">
            <!-- Export (Excel) -->
            <button id="btnExport" class="btn d-flex align-items-center gap-1">
                <i class="fa fa-file-excel-o" aria-hidden="true"></i> Export
            </button>

            <!-- Customer View (Desktop) -->
            <button id="btnCustomerView" class="btn btn-success d-flex align-items-center gap-1">
                <i class="fa fa-desktop"></i> Customer View
            </button>

            <!-- Counter (Bookmark) -->
            <button id="btnCounter" class="btn d-flex align-items-center gap-1">
                <i class="fa fa-bookmark"></i> Counter
            </button>
        </div>

    </div>
</div>

<!-- Modal: Create Register -->
<div class="modal fade" id="modalCreateRegister" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen modal-dialog-scrollable">
        <div class="modal-content" id="cr-modal">

            <!-- Header -->
            <div class="modal-header cr-header">
                <h5 class="modal-title">Create Register</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Body -->
            <div class="modal-body">

                <!-- Unit Code + Save -->
                <div class="row justify-content-center align-items-center g-2 mb-3">
                    <div class="col-auto">
                        <label for="DDLUnitCode" class="col-form-label fw-semibold">
                            Unit Code <span class="text-danger">*</span>
                        </label>
                    </div>

                    <div class="col-12 col-md-5">
                        <div class="cr-input">
                            <!-- ใช้ Choices.js -->
                            <select id="DDLUnitCode" class="form-control"></select>
                        </div>
                    </div>

                    <div class="col-auto">
                        <button id="crBtnSave" class="btn btn-success">
                            <i class="fa fa-check me-1"></i> Save
                        </button>
                    </div>
                </div>

                <!-- Table -->
                <div class="table-responsive">
                    <table class="table table-sm table-hover mb-0 cr-table" id="crTable">
                        <thead>
                            <tr>
                                <th style="width:64px;">No.</th>
                                <th style="width:120px;">Unit Code</th>
                                <th>Customer Name</th>
                                <th style="width:180px;">Responsible Name</th>
                                <th style="width:120px;">Register</th>
                                <th style="width:120px;">Wait</th>
                                <th style="width:120px;">In Process</th>
                                <th style="width:120px;">FastFix</th>
                                <th style="width:120px;">FixedDuration</th>
                                <th style="width:120px;">FastFixFinish</th>
                                <th style="width:120px;">Done</th>
                                <th style="width:120px;">Reason</th>
                                <th style="width:120px;">Counter</th>
                                <th style="width:120px;">Create By</th>
                                <th style="width:120px;">Update Date</th>
                                <th style="width:120px;">Update By</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

            </div>

            <!-- Footer -->
            <div class="modal-footer justify-content-end">
                <button type="button" class="btn btn-light cr-cancel" data-bs-dismiss="modal">Cancel</button>
            </div>

        </div>
    </div>
</div>

<div id="EditRegisterLog" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="hUnitCode" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        @* ใช้ modal-lg + centered *@
        <div class="modal-content modern-modal">

            <div class="modal-header border-0 pb-0">
                <div class="w-100 d-flex justify-content-between align-items-start">
                    <div>
                        <h5 class="modal-title fw-bold mb-1">
                            Edit Register Log
                        </h5>
                        <div class="text-muted small">
                            Unit: <span id="hUnitCode" class="fw-semibold"></span>
                        </div>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>

            <div class="modal-body pt-3 pb-1">
                <div class="edit-register-wrapper">

                    <!-- Block: Responsible & Career -->
                    <div class="er-section">
                        <h6 class="er-section-title">Customer Info</h6>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label fw-semibold small mb-1">Responsible<span class="text-danger">*</span></label>
                                <select id="ddl_Responsible" class="form-control">
                                    <option value="">-- Select Responsible --</option>
                                    @foreach (var cs in CSResponsList)
                                    {
                                        var val = (cs.ValueInt ?? "").ToString();
                                        var text = (cs.Text ?? "").ToString();
                                        <option value="@val">@text</option>
                                    }
                                </select>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label fw-semibold small mb-1">Career<span class="text-danger">*</span></label>
                                <select id="ddl_Career" class="form-control">
                                    <option value="">-- Select Career --</option>
                                    @foreach (var cl in CareerList)
                                    {
                                        var val = (cl.ValueInt ?? "").ToString();
                                        var text = (cl.Text ?? "").ToString();
                                        <option value="@val">@text</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Block: Status -->
                    <div class="er-section">
                        <h6 class="er-section-title d-flex align-items-center">
                            Status
                            <span class="text-danger ms-1">*</span>
                        </h6>
                        <div class="er-status-group">
                            <div class="form-check form-check-inline er-status-item">
                                <input class="form-check-input" id="FlagRegister" type="checkbox" name="FlagStatus" checked disabled>
                                <label class="form-check-label" for="FlagRegister">
                                    Register
                                </label>
                            </div>

                            <div class="form-check form-check-inline er-status-item">
                                <input class="form-check-input" id="FlagInprocess" type="checkbox" name="FlagStatus">
                                <label class="form-check-label" for="FlagInprocess">
                                    In Process
                                </label>
                            </div>

                            <div class="form-check form-check-inline er-status-item">
                                <input class="form-check-input" id="FlagFinish" type="checkbox" name="FlagStatus">
                                <label class="form-check-label" for="FlagFinish">
                                    Done
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Block: Reason & FinPlus -->
                    <div class="er-section">
                        <h6 class="er-section-title">Finance</h6>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label fw-semibold small mb-1">Reason<span class="text-danger">*</span></label>
                                <select id="ddl_Reason" class="form-control">
                                    <option value="">-- Select Reason --</option>
                                    @foreach (var rl in ReasonList)
                                    {
                                        var val = (rl.ValueInt ?? "").ToString();
                                        var text = (rl.Text ?? "").ToString();
                                        <option value="@val">@text</option>
                                    }
                                </select>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label fw-semibold small mb-1">Fin Plus<span class="text-danger">*</span></label>
                                <select id="ddl_FinPlus" class="form-control">
                                    <option value="">-- Select Bank --</option>
                                    @foreach (var bl in BankList)
                                    {
                                        var val = (bl.ValueInt ?? "").ToString();
                                        var text = (bl.Text ?? "").ToString();
                                        <option value="@val">@text</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="modal-footer border-0 pt-0">
                <button type="button"
                        onclick="RegisterLog.SaveEditRegister()"
                        class="btn btn-success px-4">
                    <i class="fa fa-save me-1" aria-hidden="true"></i> Save
                </button>
                <button type="button"
                        class="btn btn-outline-secondary"
                        data-bs-dismiss="modal">
                    Close
                </button>
            </div>

        </div>
    </div>
</div>


@section Scripts {
    <script>
        const customerViewUrl = '@Url.Action("Index", "QueueBankCustomerView")';
        const QueueBankCheckerViewUrl = '@Url.Action("Index", "QueueBankCheckerView")';
    </script>

    <script src="~/js/Pages/QueueBank/QueueBank.js?ver=@DateTime.Now.Ticks.ToString()"></script>
    <link rel="stylesheet" type="text/css" href="~/css/queuebank.css?ver=@DateTime.Now.Ticks.ToString()">
}