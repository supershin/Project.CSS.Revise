@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_LayoutSite.cshtml";
    @model List<Project.CSS.Revise.Web.Models.User>
}

<div class="container-fluid">
    <div class="page-title">
        <div class="row">
            <div class="col-6">
                <h4>CS Response</h4>
            </div>
            <div class="col-6">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="index.html">
                            <svg class="stroke-icon">
                                <use xlink:href="@Url.Content("~/assets/svg/icon-sprite.svg#stroke-home")"></use>
                            </svg>
                        </a>
                    </li>
                    <li class="breadcrumb-item">Setting</li>
                    <li class="breadcrumb-item active">CS Response</li>
                </ol>
            </div>
        </div>
    </div>
</div>
<!-- Container-fluid starts-->
<div class="container-fluid">
    <div class="row">
        <div class="col-xl-3 xl-30 box-col-12">
            <div class="md-sidebar">
                <a class="btn btn-primary email-aside-toggle md-sidebar-toggle">Job filter</a>
                <div class="md-sidebar-aside job-sidebar">
                    <div class="default-according style-1 faq-accordion job-accordion">
                        <div class="accordion" id="accordionExample">
                            <div class="card">
                                <div class="card-header" id="headingOne">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link btn-block text-start" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Filter</button>
                                    </h2>
                                </div>
                                <div class="collapse show" id="collapseOne" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                    <div class="card-body filter-cards-view animate-chk">
                                        <div class="job-filter mb-2">
                                            <div class="faq-form">
                                                <input class="form-control" type="text" placeholder="Search.."><i class="search-icon" data-feather="search"></i>
                                            </div>
                                        </div>
                                        <div class="job-filter mb-2">
                                            <div class="faq-form">
                                                <input class="form-control" type="text" placeholder="location.."><i class="search-icon" data-feather="map-pin"></i>
                                            </div>
                                        </div>
                                        <button class="btn btn-primary text-center" type="button">Find jobs</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-9 xl-70 box-col-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        @foreach (var user in Model)
                        {
                            <div class="col-xl-6 col-sm-6 col-xxl-3 col-ed-6 box-col-6">
                                <div class="card social-profile">
                                    <div class="card-body text-center">
                                        <div class="social-img-wrap hover-icon-swap">
                                            <div class="social-img">
                                                <a href="~/CSMapping">
                                                    <i class="icofont icon-toggle icofont-man-in-glasses"
                                                       data-default="icofont-man-in-glasses"
                                                       data-hover="icofont-ui-edit"></i>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="social-details mt-3">
                                            <h5 class="mb-1">
                                                <a href="social-app.html">@($"{user.FirstName} {user.LastName}")</a>
                                            </h5>
                                            <span class="f-light">@($"{user.FirstName_Eng} {user.LastName_Eng}")</span>

                                            @{
                                                var projects = new[] {  new { Name = "ฌาน เดอะ ริเวอร์ไซด์ บรมราชชนนี", Units = 4 },
                                                                        new { Name = "แอทโมซ ลาดพร้าว 71", Units = 3 },
                                                                        new { Name = "แม็กซี่ ไพร์ม รัชดา-สุทธิสาร 71", Units = 12 }
                                                };
                                            }

                                            @foreach (var proj in projects)
                                            {
                                                var collapseId = $"collapse_{user.ID}_{proj.Name.GetHashCode()}";
                                                <div class="small text-muted mt-2">
                                                    <a class="text-muted" data-bs-toggle="collapse" href="#@collapseId" role="button" aria-expanded="false" aria-controls="@collapseId">
                                                        @proj.Name -
                                                        <span class="badge rounded-circle badge-p-space badge-danger badge-small">@proj.Units</span> Unit
                                                    </a>
                                                </div>

                                                <div class="collapse mt-2" id="@collapseId">
                                                    <div class="card card-body py-2 px-3">
                                                        <ul class="mb-0">
                                                            <li>Unit : A001 - Status : <span class="badge badge-light badge-small text-dark">ว่าง</span></li>
                                                            <li>Unit : A002 - Status : <span class="badge badge-danger badge-small">จอง</span></li>
                                                            <li>Unit : A003 - Status : <span class="badge badge-primary badge-small">สัญญา</span></li>
                                                            <li>Unit : A004 - Status : <span class="badge badge-success badge-small">โอน</span></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Container-fluid Ends-->
<script>
document.querySelectorAll('.hover-icon-swap').forEach(container => {
        const icon = container.querySelector('.icon-toggle');
        const defaultClass = icon.dataset.default;
        const hoverClass = icon.dataset.hover;

        container.addEventListener('mouseenter', () => {
            icon.classList.remove(defaultClass);
            icon.classList.add(hoverClass);
        });

        container.addEventListener('mouseleave', () => {
            icon.classList.remove(hoverClass);
            icon.classList.add(defaultClass);
        });
    });

</script>